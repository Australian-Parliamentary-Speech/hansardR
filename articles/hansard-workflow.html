<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Complete Hansard Data Processing Workflow • hansardR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Complete Hansard Data Processing Workflow">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">hansardR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/hansard-workflow.html">Complete Hansard Data Processing Workflow</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Complete Hansard Data Processing Workflow</h1>
            
      

      <div class="d-none name"><code>hansard-workflow.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="processing-australian-parliamentary-hansard-data">Processing Australian Parliamentary Hansard Data<a class="anchor" aria-label="anchor" href="#processing-australian-parliamentary-hansard-data"></a>
</h2>
<p>The <code>hansardR</code> package provides a comprehensive toolkit
for processing, validating, and analysing Australian Parliamentary
Hansard CSV data. This vignette demonstrates the complete workflow from
raw CSV files to a structured database ready for computational social
science research.</p>
<div class="section level3">
<h3 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h3>
<p>The package handles parliamentary data with the following structure:
- <strong>Sessions</strong>: Parliamentary sitting days -
<strong>Members</strong>: MPs with party affiliations and
electorates<br>
- <strong>Debates</strong>: Major topics discussed in each session -
<strong>Speeches</strong>: Individual contributions, questions, answers,
and interjections</p>
</div>
<div class="section level3">
<h3 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://australian-parliamentary-speech.github.io/hansardR/">hansardR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dbi.r-dbi.org" class="external-link">DBI</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use sample data included with the package</span></span>
<span><span class="va">sample_data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"houseCSV"</span>, package <span class="op">=</span> <span class="st">"hansardR"</span><span class="op">)</span></span>
<span><span class="va">db_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".db"</span><span class="op">)</span>  <span class="co"># Use temporary database for vignette</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Sample data location:"</span>, <span class="va">sample_data_path</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Sample data location: /home/runner/work/_temp/Library/hansardR/extdata/houseCSV</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Temporary database:"</span>, <span class="va">db_path</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Temporary database: /tmp/RtmpXnPcTJ/file1eef45ccdeb8.db</span></span>
<span></span>
<span><span class="co"># Show available sample data structure</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.exists</a></span><span class="op">(</span><span class="va">sample_data_path</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nAvailable sample years:\n"</span><span class="op">)</span></span>
<span>  <span class="va">year_dirs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.dirs</a></span><span class="op">(</span><span class="va">sample_data_path</span>, recursive <span class="op">=</span> <span class="cn">FALSE</span>, full.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">year</span> <span class="kw">in</span> <span class="va">year_dirs</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">year_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">sample_data_path</span>, <span class="va">year</span><span class="op">)</span></span>
<span>    <span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">year_path</span>, pattern <span class="op">=</span> <span class="st">"*.csv"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">" "</span>, <span class="va">year</span>, <span class="st">": "</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">files</span><span class="op">)</span>, <span class="st">" files\n"</span><span class="op">)</span></span>
<span>    <span class="kw">for</span> <span class="op">(</span><span class="va">file</span> <span class="kw">in</span> <span class="va">files</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"   -"</span>, <span class="va">file</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Available sample years:</span></span>
<span><span class="co">#&gt;   2024 :  3  files</span></span>
<span><span class="co">#&gt;    - 2024-02-08_edit_step7.csv </span></span>
<span><span class="co">#&gt;    - 2024-05-14_edit_step7.csv </span></span>
<span><span class="co">#&gt;    - 2024-11-21_edit_step7.csv </span></span>
<span><span class="co">#&gt;   2025 :  2  files</span></span>
<span><span class="co">#&gt;    - 2025-02-06_edit_step7.csv </span></span>
<span><span class="co">#&gt;    - 2025-03-25_edit_step7.csv</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-1-database-creation">Step 1: Database Creation<a class="anchor" aria-label="anchor" href="#step-1-database-creation"></a>
</h3>
<p>Create a new SQLite database with the standard Hansard schema:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create database with standard schema</span></span>
<span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_hansard_database.html">create_hansard_database</a></span><span class="op">(</span><span class="va">db_path</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Database triggers created</span></span>
<span><span class="co">#&gt; Standard schema created with optimizations</span></span>
<span><span class="co">#&gt; Database created successfully at: /tmp/RtmpXnPcTJ/file1eef45ccdeb8.db</span></span>
<span></span>
<span><span class="co"># Or connect to existing database</span></span>
<span><span class="co"># con &lt;- connect_hansard_database(db_path)</span></span></code></pre></div>
<p>The database includes optimised indexes for: - Temporal queries (by
date, year) - Member-based analysis (by party, electorate) - Content
analysis (full-text search ready) - Debate structure (hierarchical
organisation)</p>
</div>
<div class="section level3">
<h3 id="step-2-file-discovery-and-validation">Step 2: File Discovery and Validation<a class="anchor" aria-label="anchor" href="#step-2-file-discovery-and-validation"></a>
</h3>
<p>Before processing, validate your CSV files to ensure data
integrity:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Find sample CSV files included with the package</span></span>
<span><span class="va">sample_years</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.dirs</a></span><span class="op">(</span><span class="va">sample_data_path</span>, recursive <span class="op">=</span> <span class="cn">FALSE</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">sample_years</span> <span class="op">&lt;-</span> <span class="va">sample_years</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"\\d{4}$"</span>, <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">sample_years</span><span class="op">)</span><span class="op">)</span><span class="op">]</span>  <span class="co"># Only year directories</span></span>
<span></span>
<span><span class="co"># Get all sample files</span></span>
<span><span class="va">sample_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">year_dir</span> <span class="kw">in</span> <span class="va">sample_years</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">year_dir</span>, pattern <span class="op">=</span> <span class="st">"*_edit_step7.csv"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="va">sample_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">sample_files</span>, <span class="va">files</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Found"</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">sample_files</span><span class="op">)</span>, <span class="st">"sample files across"</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">sample_years</span><span class="op">)</span>, <span class="st">"years:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Found 5 sample files across 2 years:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Years available:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">sample_years</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Years available: 2024, 2025</span></span>
<span></span>
<span><span class="co"># Show file details</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">file</span> <span class="kw">in</span> <span class="va">sample_files</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">year</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">dirname</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">filename</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span>
<span>  <span class="va">size_kb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.info.html" class="external-link">file.size</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span> <span class="op">/</span> <span class="fl">1024</span>, <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">" "</span>, <span class="va">year</span>, <span class="st">"/"</span>, <span class="va">filename</span>, <span class="st">" ("</span>, <span class="va">size_kb</span>, <span class="st">" KB)\n"</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt;  2024/2024-02-08_edit_step7.csv (316.4 KB)</span></span>
<span><span class="co">#&gt;  2024/2024-05-14_edit_step7.csv (380.6 KB)</span></span>
<span><span class="co">#&gt;  2024/2024-11-21_edit_step7.csv (469.9 KB)</span></span>
<span><span class="co">#&gt;  2025/2025-02-06_edit_step7.csv (535.8 KB)</span></span>
<span><span class="co">#&gt;  2025/2025-03-25_edit_step7.csv (348.2 KB)</span></span></code></pre></div>
<div class="section level4">
<h4 id="file-structure-validation">File Structure Validation<a class="anchor" aria-label="anchor" href="#file-structure-validation"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Validate file structures</span></span>
<span><span class="va">validation_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validate_csv_batch.html">validate_csv_batch</a></span><span class="op">(</span><span class="va">sample_files</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View validation summary</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">validation_results</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 9</span></span></span>
<span><span class="co">#&gt;   file_path    filename valid session_date row_count n_missing_cols n_extra_cols</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> /home/runne… 2024-02… TRUE  2024-02-08           5              0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> /home/runne… 2024-05… TRUE  2024-05-14           5              0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> /home/runne… 2024-11… TRUE  2024-11-21           5              0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> /home/runne… 2025-02… TRUE  2025-02-06           5              0            0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> /home/runne… 2025-03… TRUE  2025-03-25           5              0            0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: issues &lt;chr&gt;, error &lt;chr&gt;</span></span></span>
<span></span>
<span><span class="co"># Check for issues</span></span>
<span><span class="va">problems</span> <span class="op">&lt;-</span> <span class="va">validation_results</span><span class="op">[</span><span class="op">!</span><span class="va">validation_results</span><span class="op">$</span><span class="va">valid</span>, <span class="op">]</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">problems</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Files with issues:\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">problems</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"filename"</span>, <span class="st">"issues"</span>, <span class="st">"error"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Files ready for import</span></span>
<span><span class="va">valid_files</span> <span class="op">&lt;-</span> <span class="va">validation_results</span><span class="op">$</span><span class="va">file_path</span><span class="op">[</span><span class="va">validation_results</span><span class="op">$</span><span class="va">valid</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nValid files ready for import:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">valid_files</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Valid files ready for import: 5</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="step-3-single-file-import">Step 3: Single File Import<a class="anchor" aria-label="anchor" href="#step-3-single-file-import"></a>
</h3>
<p>Start by importing a single file to test the workflow:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Import one file for testing</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">valid_files</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">test_file</span> <span class="op">&lt;-</span> <span class="va">valid_files</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Testing import with:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">test_file</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">success</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_hansard_file.html">import_hansard_file</a></span><span class="op">(</span><span class="va">test_file</span>, <span class="va">con</span>, validate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">success</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"✓ Test import successful!\n"</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Check what was imported</span></span>
<span>    <span class="va">stats</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_database_stats.html">get_database_stats</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Database now contains:\n"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Sessions:"</span>, <span class="va">stats</span><span class="op">$</span><span class="va">sessions</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Members:"</span>, <span class="va">stats</span><span class="op">$</span><span class="va">members</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Speeches:"</span>, <span class="va">stats</span><span class="op">$</span><span class="va">speeches</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Testing import with: 2024-02-08_edit_step7.csv</span></span>
<span><span class="co">#&gt; Processing: 2024-02-08_edit_step7.csv</span></span>
<span><span class="co">#&gt;   v Successfully imported 243 records</span></span>
<span><span class="co">#&gt; ✓ Test import successful!</span></span>
<span><span class="co">#&gt; Database now contains:</span></span>
<span><span class="co">#&gt;   Sessions: 1 </span></span>
<span><span class="co">#&gt;   Members: 44 </span></span>
<span><span class="co">#&gt;   Speeches: 243</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-4-batch-processing">Step 4: Batch Processing<a class="anchor" aria-label="anchor" href="#step-4-batch-processing"></a>
</h3>
<div class="section level4">
<h4 id="process-a-single-year">Process a Single Year<a class="anchor" aria-label="anchor" href="#process-a-single-year"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Process sample years</span></span>
<span><span class="va">sample_year_dirs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.dirs</a></span><span class="op">(</span><span class="va">sample_data_path</span>, recursive <span class="op">=</span> <span class="cn">FALSE</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">sample_year_dirs</span> <span class="op">&lt;-</span> <span class="va">sample_year_dirs</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"\\d{4}$"</span>, <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">sample_year_dirs</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">year_dir</span> <span class="kw">in</span> <span class="va">sample_year_dirs</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">year_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">year_dir</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n=== Processing"</span>, <span class="va">year_name</span>, <span class="st">"===\n"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Show what files we're about to process</span></span>
<span>  <span class="va">csv_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">year_dir</span>, pattern <span class="op">=</span> <span class="st">"*_edit_step7.csv"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Files to process:\n"</span><span class="op">)</span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">file</span> <span class="kw">in</span> <span class="va">csv_files</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  -"</span>, <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="va">year_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_hansard_year.html">import_hansard_year</a></span><span class="op">(</span></span>
<span>    <span class="va">year_dir</span>, </span>
<span>    <span class="va">con</span>, </span>
<span>    pattern <span class="op">=</span> <span class="st">"*_edit_step7.csv"</span>,</span>
<span>    validate <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    progress <span class="op">=</span> <span class="cn">FALSE</span>  <span class="co"># Disable progress bar in vignette</span></span>
<span>  <span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Show results</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">year_results</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">successful</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">year_results</span><span class="op">$</span><span class="va">success</span><span class="op">)</span></span>
<span>    <span class="va">total</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">year_results</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Result: Imported"</span>, <span class="va">successful</span>, <span class="st">"out of"</span>, <span class="va">total</span>, <span class="st">"files successfully\n"</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">successful</span> <span class="op">&lt;</span> <span class="va">total</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">failed_files</span> <span class="op">&lt;-</span> <span class="va">year_results</span><span class="op">$</span><span class="va">filename</span><span class="op">[</span><span class="op">!</span><span class="va">year_results</span><span class="op">$</span><span class="va">success</span><span class="op">]</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Failed files:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">failed_files</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Processing 2024 ===</span></span>
<span><span class="co">#&gt; Files to process:</span></span>
<span><span class="co">#&gt;   - 2024-02-08_edit_step7.csv </span></span>
<span><span class="co">#&gt;   - 2024-05-14_edit_step7.csv </span></span>
<span><span class="co">#&gt;   - 2024-11-21_edit_step7.csv</span></span>
<span><span class="co">#&gt; Processing 2024 (3 files)</span></span>
<span><span class="co">#&gt; Processing: 2024-02-08_edit_step7.csv</span></span>
<span><span class="co">#&gt;   ! Session already exists (use force_reimport = TRUE to overwrite)</span></span>
<span><span class="co">#&gt; Processing: 2024-05-14_edit_step7.csv</span></span>
<span><span class="co">#&gt;   v Successfully imported 191 records</span></span>
<span><span class="co">#&gt; Processing: 2024-11-21_edit_step7.csv</span></span>
<span><span class="co">#&gt;   v Successfully imported 166 records</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Import Summary ===</span></span>
<span><span class="co">#&gt; Successful: 2/3 (66.7%)</span></span>
<span><span class="co">#&gt; Failed files: 2024-02-08_edit_step7.csv</span></span>
<span><span class="co">#&gt; Result: Imported 2 out of 3 files successfully</span></span>
<span><span class="co">#&gt; Failed files: 2024-02-08_edit_step7.csv </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Processing 2025 ===</span></span>
<span><span class="co">#&gt; Files to process:</span></span>
<span><span class="co">#&gt;   - 2025-02-06_edit_step7.csv </span></span>
<span><span class="co">#&gt;   - 2025-03-25_edit_step7.csv</span></span>
<span><span class="co">#&gt; Processing 2025 (2 files)</span></span>
<span><span class="co">#&gt; Processing: 2025-02-06_edit_step7.csv</span></span>
<span><span class="co">#&gt;   v Successfully imported 182 records</span></span>
<span><span class="co">#&gt; Processing: 2025-03-25_edit_step7.csv</span></span>
<span><span class="co">#&gt;   v Successfully imported 189 records</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Import Summary ===</span></span>
<span><span class="co">#&gt; Successful: 2/2 (100%)</span></span>
<span><span class="co">#&gt; Result: Imported 2 out of 2 files successfully</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="process-multiple-years">Process Multiple Years<a class="anchor" aria-label="anchor" href="#process-multiple-years"></a>
</h4>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Process both available years in the sample data</span></span>
<span><span class="va">available_years</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.dirs</a></span><span class="op">(</span><span class="va">sample_data_path</span>, recursive <span class="op">=</span> <span class="cn">FALSE</span>, full.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">available_years</span> <span class="op">&lt;-</span> <span class="va">available_years</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"^\\d{4}$"</span>, <span class="va">available_years</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Processing all available sample years:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">available_years</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Processing all available sample years: 2024, 2025</span></span>
<span></span>
<span><span class="va">all_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">year</span> <span class="kw">in</span> <span class="va">available_years</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">year_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">sample_data_path</span>, <span class="va">year</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.exists</a></span><span class="op">(</span><span class="va">year_path</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n=== Processing"</span>, <span class="va">year</span>, <span class="st">"===\n"</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Show what we're processing</span></span>
<span>    <span class="va">csv_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">year_path</span>, pattern <span class="op">=</span> <span class="st">"*_edit_step7.csv"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Found"</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">csv_files</span><span class="op">)</span>, <span class="st">"CSV files in"</span>, <span class="va">year</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="va">year_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_hansard_year.html">import_hansard_year</a></span><span class="op">(</span></span>
<span>      <span class="va">year_path</span>, </span>
<span>      <span class="va">con</span>,</span>
<span>      validate <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>      force_reimport <span class="op">=</span> <span class="cn">FALSE</span>,  <span class="co"># Skip existing sessions</span></span>
<span>      progress <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span></span>
<span>    </span>
<span>    <span class="va">all_results</span><span class="op">[[</span><span class="va">year</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">year_results</span></span>
<span>    </span>
<span>    <span class="co"># Show summary</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">year_results</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">successful</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">year_results</span><span class="op">$</span><span class="va">success</span><span class="op">)</span></span>
<span>      <span class="va">total</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">year_results</span><span class="op">)</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Summary:"</span>, <span class="va">successful</span>, <span class="st">"/"</span>, <span class="va">total</span>, <span class="st">"files imported successfully\n"</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Directory not found:"</span>, <span class="va">year_path</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Processing 2024 ===</span></span>
<span><span class="co">#&gt; Found 3 CSV files in 2024</span></span>
<span><span class="co">#&gt; Processing 2024 (3 files)</span></span>
<span><span class="co">#&gt; Processing: 2024-02-08_edit_step7.csv</span></span>
<span><span class="co">#&gt;   ! Session already exists (use force_reimport = TRUE to overwrite)</span></span>
<span><span class="co">#&gt; Processing: 2024-05-14_edit_step7.csv</span></span>
<span><span class="co">#&gt;   ! Session already exists (use force_reimport = TRUE to overwrite)</span></span>
<span><span class="co">#&gt; Processing: 2024-11-21_edit_step7.csv</span></span>
<span><span class="co">#&gt;   ! Session already exists (use force_reimport = TRUE to overwrite)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Import Summary ===</span></span>
<span><span class="co">#&gt; Successful: 0/3 (0%)</span></span>
<span><span class="co">#&gt; Failed files: 2024-02-08_edit_step7.csv, 2024-05-14_edit_step7.csv, 2024-11-21_edit_step7.csv</span></span>
<span><span class="co">#&gt; Summary: 0 / 3 files imported successfully</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Processing 2025 ===</span></span>
<span><span class="co">#&gt; Found 2 CSV files in 2025</span></span>
<span><span class="co">#&gt; Processing 2025 (2 files)</span></span>
<span><span class="co">#&gt; Processing: 2025-02-06_edit_step7.csv</span></span>
<span><span class="co">#&gt;   ! Session already exists (use force_reimport = TRUE to overwrite)</span></span>
<span><span class="co">#&gt; Processing: 2025-03-25_edit_step7.csv</span></span>
<span><span class="co">#&gt;   ! Session already exists (use force_reimport = TRUE to overwrite)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Import Summary ===</span></span>
<span><span class="co">#&gt; Successful: 0/2 (0%)</span></span>
<span><span class="co">#&gt; Failed files: 2025-02-06_edit_step7.csv, 2025-03-25_edit_step7.csv</span></span>
<span><span class="co">#&gt; Summary: 0 / 2 files imported successfully</span></span>
<span></span>
<span><span class="co"># Combine results</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">all_results</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">combined_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">all_results</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n=== Overall Import Summary ===\n"</span><span class="op">)</span></span>
<span>  <span class="va">total_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">combined_results</span><span class="op">)</span></span>
<span>  <span class="va">total_successful</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">combined_results</span><span class="op">$</span><span class="va">success</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Total files processed:"</span>, <span class="va">total_files</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Successfully imported:"</span>, <span class="va">total_successful</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Success rate:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="va">total_successful</span> <span class="op">/</span> <span class="va">total_files</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"%\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Overall Import Summary ===</span></span>
<span><span class="co">#&gt; Total files processed: 5 </span></span>
<span><span class="co">#&gt; Successfully imported: 0 </span></span>
<span><span class="co">#&gt; Success rate: 0 %</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="step-5-data-exploration">Step 5: Data Exploration<a class="anchor" aria-label="anchor" href="#step-5-data-exploration"></a>
</h3>
<div class="section level4">
<h4 id="database-statistics">Database Statistics<a class="anchor" aria-label="anchor" href="#database-statistics"></a>
</h4>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get comprehensive database statistics</span></span>
<span><span class="va">stats</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_database_stats.html">get_database_stats</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"=== Database Statistics ===\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; === Database Statistics ===</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Sessions:"</span>, <span class="va">stats</span><span class="op">$</span><span class="va">sessions</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Sessions: 5</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Members:"</span>, <span class="va">stats</span><span class="op">$</span><span class="va">members</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Members: 96</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Debates:"</span>, <span class="va">stats</span><span class="op">$</span><span class="va">debates</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Debates: 66</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Speeches:"</span>, <span class="va">stats</span><span class="op">$</span><span class="va">speeches</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Speeches: 971</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Date range:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">stats</span><span class="op">$</span><span class="va">date_range</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, <span class="st">"to"</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">stats</span><span class="op">$</span><span class="va">date_range</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Date range: 19761 to 20172</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Average speech length:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">stats</span><span class="op">$</span><span class="va">avg_length</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"characters\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Average speech length: 2688.2 characters</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nSpeech types:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Speech types:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Questions:"</span>, <span class="va">stats</span><span class="op">$</span><span class="va">questions</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Questions: NA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Answers:"</span>, <span class="va">stats</span><span class="op">$</span><span class="va">answers</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Answers: NA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Speeches:"</span>, <span class="va">stats</span><span class="op">$</span><span class="va">speeches</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Speeches: 971</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  Interjections:"</span>, <span class="va">stats</span><span class="op">$</span><span class="va">interjections</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Interjections: NA</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="top-speakers-analysis">Top Speakers Analysis<a class="anchor" aria-label="anchor" href="#top-speakers-analysis"></a>
</h4>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get most active speakers</span></span>
<span><span class="va">top_speakers</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_top_speakers.html">get_top_speakers</a></span><span class="op">(</span><span class="va">con</span>, limit <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">top_speakers</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15 × 8</span></span></span>
<span><span class="co">#&gt;    full_name       party electorate total_speeches total_words avg_speech_length</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> <span style="color: #BB0000;">NA</span>              <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>                    452     1<span style="text-decoration: underline;">126</span>765             <span style="text-decoration: underline;">2</span>509.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Dick, Milton MP ALP   Oxley                 172       <span style="text-decoration: underline;">87</span>631             <span style="text-decoration: underline;">6</span>259.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Albanese, Anth… ALP   Grayndler              32       <span style="text-decoration: underline;">45</span>079             <span style="text-decoration: underline;">1</span>610.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> DEPUTY SPEAKER… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>                     21       <span style="text-decoration: underline;">80</span>747            <span style="text-decoration: underline;">10</span>093.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Chalmers, Jim … ALP   Rankin                 18       <span style="text-decoration: underline;">33</span>477             <span style="text-decoration: underline;">2</span>092.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Sukkar, Michae… LP    Deakin                 16          <span style="color: #BB0000;">NA</span>               <span style="color: #BB0000;">NA</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Dutton, Peter … LNP   Dickson                15        <span style="text-decoration: underline;">1</span>893              473.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Burke, Tony MP  ALP   Watson                 14       <span style="text-decoration: underline;">12</span>470             <span style="text-decoration: underline;">2</span>078.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Claydon, Sharo… ALP   Newcastle              14         207              207 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Taylor, Angus … LP    Hume                   14        <span style="text-decoration: underline;">2</span>469              247.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> Plibersek, Tan… ALP   Sydney                  8       <span style="text-decoration: underline;">11</span>193             <span style="text-decoration: underline;">1</span>599 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> Marles, Richar… ALP   Corio                   7       <span style="text-decoration: underline;">12</span>228             <span style="text-decoration: underline;">2</span>038 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> Chesters, Lisa… ALP   Bendigo                 6         576              192 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> Butler, Mark C… ALP   Hindmarsh               5       <span style="text-decoration: underline;">10</span>475             <span style="text-decoration: underline;">2</span>095 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> Clare, Jason D… ALP   Blaxland                5       <span style="text-decoration: underline;">11</span>696             <span style="text-decoration: underline;">2</span>339.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: questions_asked &lt;lgl&gt;, answers_given &lt;lgl&gt;</span></span></span>
<span></span>
<span><span class="co"># Party breakdown</span></span>
<span><span class="va">party_activity</span> <span class="op">&lt;-</span> <span class="va">top_speakers</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">party</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    members <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    total_speeches <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">total_speeches</span><span class="op">)</span>,</span>
<span>    avg_speeches_per_member <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">total_speeches</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">total_speeches</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">party_activity</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 4</span></span></span>
<span><span class="co">#&gt;   party members total_speeches avg_speeches_per_member</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> <span style="color: #BB0000;">NA</span>          2            473                     473</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> ALP        10            281                     281</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> LP          2             30                      30</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> LNP         1             15                      15</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="step-6-advanced-queries-with-dplyr">Step 6: Advanced Queries with dplyr<a class="anchor" aria-label="anchor" href="#step-6-advanced-queries-with-dplyr"></a>
</h3>
<p>Get table references for direct dplyr querying:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get table references</span></span>
<span><span class="va">tbls</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_hansard_tables.html">get_hansard_tables</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Show table structure</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Available tables:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Available tables:</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">name</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">tbls</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">" "</span>, <span class="va">name</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt;   sessions </span></span>
<span><span class="co">#&gt;   members </span></span>
<span><span class="co">#&gt;   debates </span></span>
<span><span class="co">#&gt;   speeches</span></span></code></pre></div>
<div class="section level4">
<h4 id="temporal-analysis">Temporal Analysis<a class="anchor" aria-label="anchor" href="#temporal-analysis"></a>
</h4>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Questions over time by party (using our sample data)</span></span>
<span><span class="va">questions_by_party_year</span> <span class="op">&lt;-</span> <span class="va">tbls</span><span class="op">$</span><span class="va">speeches</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">is_question</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">tbls</span><span class="op">$</span><span class="va">members</span>, by <span class="op">=</span> <span class="st">"member_id"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">tbls</span><span class="op">$</span><span class="va">sessions</span>, by <span class="op">=</span> <span class="st">"session_id"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">party</span>, <span class="va">year</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">questions_by_party_year</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Questions by party and year in sample data:\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">questions_by_party_year</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"No questions found in sample data\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; No questions found in sample data</span></span>
<span></span>
<span><span class="co"># Session-level activity (all speech types)</span></span>
<span><span class="va">session_activity</span> <span class="op">&lt;-</span> <span class="va">tbls</span><span class="op">$</span><span class="va">speeches</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">tbls</span><span class="op">$</span><span class="va">sessions</span>, by <span class="op">=</span> <span class="st">"session_id"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">session_date</span>, <span class="va">year</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    total_speeches <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    questions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">is_question</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    answers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">is_answer</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    interjections <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">is_interjection</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">session_date</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nSession-level activity:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Session-level activity:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">session_activity</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 6</span></span></span>
<span><span class="co">#&gt;   session_date  year total_speeches questions answers interjections</span></span>
<span><span class="co">#&gt;          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>        <span style="text-decoration: underline;">19</span>761 -<span style="color: #BB0000; text-decoration: underline;">4</span><span style="color: #BB0000;">658</span>            243 <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>        <span style="text-decoration: underline;">19</span>857 -<span style="color: #BB0000; text-decoration: underline;">4</span><span style="color: #BB0000;">658</span>            191 <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>        <span style="text-decoration: underline;">20</span>048 -<span style="color: #BB0000; text-decoration: underline;">4</span><span style="color: #BB0000;">658</span>            166 <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>        <span style="text-decoration: underline;">20</span>125 -<span style="color: #BB0000; text-decoration: underline;">4</span><span style="color: #BB0000;">658</span>            182 <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>        <span style="text-decoration: underline;">20</span>172 -<span style="color: #BB0000; text-decoration: underline;">4</span><span style="color: #BB0000;">657</span>            189 <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="content-analysis">Content Analysis<a class="anchor" aria-label="anchor" href="#content-analysis"></a>
</h4>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Average speech length by party (using sample data)</span></span>
<span><span class="va">speech_length_by_party</span> <span class="op">&lt;-</span> <span class="va">tbls</span><span class="op">$</span><span class="va">speeches</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">tbls</span><span class="op">$</span><span class="va">members</span>, by <span class="op">=</span> <span class="st">"member_id"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">party</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span>  <span class="co"># Only include rows with party information</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">party</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    speech_count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    avg_length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">content_length</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>    median_length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">content_length</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>    total_words <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">content_length</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">speech_count</span> <span class="op">&gt;=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span>  <span class="co"># Include all parties in sample data</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">avg_length</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Speech length statistics by party:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Speech length statistics by party:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">speech_length_by_party</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 8 × 5</span></span></span>
<span><span class="co">#&gt;   party speech_count avg_length median_length total_words</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> NATS             9     <span style="text-decoration: underline;">37</span>116.        <span style="text-decoration: underline;">37</span>116.       <span style="text-decoration: underline;">74</span>231</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> AG              12     <span style="text-decoration: underline;">10</span>751.         <span style="text-decoration: underline;">5</span>355        <span style="text-decoration: underline;">64</span>508</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> IND             15      <span style="text-decoration: underline;">7</span>685.          563        <span style="text-decoration: underline;">99</span>908</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> ALP            369      <span style="text-decoration: underline;">2</span>218.         <span style="text-decoration: underline;">1</span>167       <span style="text-decoration: underline;">379</span>359</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> KAP              2       880           880          880</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> LP              58       726.          332        <span style="text-decoration: underline;">18</span>868</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> LNP             31       351.          326         <span style="text-decoration: underline;">4</span>217</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> CA               2        <span style="color: #BB0000;">NA</span>            <span style="color: #BB0000;">NA</span>           <span style="color: #BB0000;">NA</span></span></span>
<span></span>
<span><span class="co"># Most active debates in sample data</span></span>
<span><span class="va">popular_debates</span> <span class="op">&lt;-</span> <span class="va">tbls</span><span class="op">$</span><span class="va">speeches</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">tbls</span><span class="op">$</span><span class="va">debates</span>, by <span class="op">=</span> <span class="st">"debate_id"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">debate_title</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">debate_title</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nMost discussed topics in sample data:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Most discussed topics in sample data:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">popular_debates</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 25 × 2</span></span></span>
<span><span class="co">#&gt;    debate_title                     n</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> QUESTIONS WITHOUT NOTICE       528</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> BILLS                          122</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> STATEMENTS BY MEMBERS          106</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> MATTERS OF PUBLIC IMPORTANCE    43</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ADJOURNMENT                     37</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> CONSTITUENCY STATEMENTS         21</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> CONDOLENCES                     21</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> MOTIONS                         13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> COMMITTEES                      12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> BUSINESS                        12</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 15 more rows</span></span></span>
<span></span>
<span><span class="co"># Speech type distribution</span></span>
<span><span class="va">speech_types</span> <span class="op">&lt;-</span> <span class="va">tbls</span><span class="op">$</span><span class="va">speeches</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    total_records <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    questions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">is_question</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    answers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">is_answer</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    speeches <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">is_speech</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    interjections <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">is_interjection</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    stage_directions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">is_stage_direction</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nSpeech type distribution in sample data:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Speech type distribution in sample data:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">speech_types</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 6</span></span></span>
<span><span class="co">#&gt;   total_records questions answers speeches interjections stage_directions</span></span>
<span><span class="co">#&gt;           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>           971 <span style="color: #BB0000;">NA</span>        <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>       <span style="color: #BB0000;">NA</span>            <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="member-specific-analysis">Member-Specific Analysis<a class="anchor" aria-label="anchor" href="#member-specific-analysis"></a>
</h4>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Most active members in sample data</span></span>
<span><span class="va">sample_speakers</span> <span class="op">&lt;-</span> <span class="va">tbls</span><span class="op">$</span><span class="va">speeches</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">tbls</span><span class="op">$</span><span class="va">members</span>, by <span class="op">=</span> <span class="st">"member_id"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">tbls</span><span class="op">$</span><span class="va">sessions</span>, by <span class="op">=</span> <span class="st">"session_id"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">full_name</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span>  <span class="co"># Only include identified speakers</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">full_name</span>, <span class="va">party</span>, <span class="va">electorate</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    sessions_active <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html" class="external-link">n_distinct</a></span><span class="op">(</span><span class="va">session_id</span><span class="op">)</span>,</span>
<span>    total_contributions <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    questions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">is_question</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    answers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">is_answer</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    speeches <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">is_speech</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    avg_speech_length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">content_length</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">total_contributions</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Member activity in sample data:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Member activity in sample data:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sample_speakers</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 96 × 9</span></span></span>
<span><span class="co">#&gt;    full_name      party electorate sessions_active total_contributions questions</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Dick, Milton … ALP   Oxley                    5                 172 <span style="color: #BB0000;">NA</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Albanese, Ant… ALP   Grayndler                4                  32 <span style="color: #BB0000;">NA</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> DEPUTY SPEAKE… <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>                       3                  21 <span style="color: #BB0000;">NA</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Chalmers, Jim… ALP   Rankin                   3                  18 <span style="color: #BB0000;">NA</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Sukkar, Micha… LP    Deakin                   4                  16 <span style="color: #BB0000;">NA</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Dutton, Peter… LNP   Dickson                  4                  15 <span style="color: #BB0000;">NA</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Burke, Tony MP ALP   Watson                   5                  14 <span style="color: #BB0000;">NA</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Claydon, Shar… ALP   Newcastle                5                  14 <span style="color: #BB0000;">NA</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Taylor, Angus… LP    Hume                     3                  14 <span style="color: #BB0000;">NA</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Plibersek, Ta… ALP   Sydney                   3                   8 <span style="color: #BB0000;">NA</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 86 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: answers &lt;lgl&gt;, speeches &lt;lgl&gt;, avg_speech_length &lt;dbl&gt;</span></span></span>
<span></span>
<span><span class="co"># Party representation in sample</span></span>
<span><span class="va">party_summary</span> <span class="op">&lt;-</span> <span class="va">tbls</span><span class="op">$</span><span class="va">members</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">party</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">party</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nParty representation in sample data:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Party representation in sample data:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">party_summary</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 8 × 2</span></span></span>
<span><span class="co">#&gt;   party     n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ALP      54</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> LP       13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> IND       9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> LNP       9</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> NATS      5</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> AG        3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> CA        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> KAP       1</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="step-7-text-search-and-analysis">Step 7: Text Search and Analysis<a class="anchor" aria-label="anchor" href="#step-7-text-search-and-analysis"></a>
</h3>
<div class="section level4">
<h4 id="simple-content-search">Simple Content Search<a class="anchor" aria-label="anchor" href="#simple-content-search"></a>
</h4>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Search for specific topics using database-friendly approach</span></span>
<span><span class="co"># Note: grepl() doesn't work with databases, so we use direct SQL</span></span>
<span><span class="va">climate_mentions</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbGetQuery.html" class="external-link">dbGetQuery</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"</span></span>
<span><span class="st">  SELECT </span></span>
<span><span class="st">    m.full_name,</span></span>
<span><span class="st">    m.party, </span></span>
<span><span class="st">    s.session_date,</span></span>
<span><span class="st">    sp.content_length,</span></span>
<span><span class="st">    SUBSTR(sp.content, 1, 100) || '...' as content_preview</span></span>
<span><span class="st">  FROM speeches sp</span></span>
<span><span class="st">  LEFT JOIN members m ON sp.member_id = m.member_id  </span></span>
<span><span class="st">  LEFT JOIN sessions s ON sp.session_id = s.session_id</span></span>
<span><span class="st">  WHERE LOWER(sp.content) LIKE '%climate%'</span></span>
<span><span class="st">  ORDER BY s.session_date DESC</span></span>
<span><span class="st">  LIMIT 10</span></span>
<span><span class="st">"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">climate_mentions</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Recent 'climate' mentions:\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">climate_mentions</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"No 'climate' mentions found in current dataset\n"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Try a broader search</span></span>
<span>  <span class="va">any_mentions</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbGetQuery.html" class="external-link">dbGetQuery</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"</span></span>
<span><span class="st">    SELECT COUNT(*) as total_speeches</span></span>
<span><span class="st">    FROM speeches </span></span>
<span><span class="st">    WHERE content IS NOT NULL AND LENGTH(content) &gt; 10</span></span>
<span><span class="st">  "</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Total speeches with content:"</span>, <span class="va">any_mentions</span><span class="op">$</span><span class="va">total_speeches</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Recent 'climate' mentions:</span></span>
<span><span class="co">#&gt;                   full_name party session_date content_length</span></span>
<span><span class="co">#&gt; 1                      &lt;NA&gt;  &lt;NA&gt;        20172           1625</span></span>
<span><span class="co">#&gt; 2                      &lt;NA&gt;  &lt;NA&gt;        20172           6516</span></span>
<span><span class="co">#&gt; 3                      &lt;NA&gt;  &lt;NA&gt;        20172          12979</span></span>
<span><span class="co">#&gt; 4                      &lt;NA&gt;  &lt;NA&gt;        20172           1482</span></span>
<span><span class="co">#&gt; 5       Bandt, Adam Paul MP    AG        20172            523</span></span>
<span><span class="co">#&gt; 6      Albanese, Anthony MP   ALP        20172           2308</span></span>
<span><span class="co">#&gt; 7           Sitou, Sally MP   ALP        20172            216</span></span>
<span><span class="co">#&gt; 8  Plibersek, Tanya Joan MP   ALP        20172           1722</span></span>
<span><span class="co">#&gt; 9                      &lt;NA&gt;  &lt;NA&gt;        20172           4690</span></span>
<span><span class="co">#&gt; 10          Wilson, Rick MP    LP        20172           6602</span></span>
<span><span class="co">#&gt;                                                                                            content_preview</span></span>
<span><span class="co">#&gt; 1  by leave—I move:  That standing order 133 (b) (deferred divisions) be suspended for this sitting. I ...</span></span>
<span><span class="co">#&gt; 2  Honourable members interjecting—  Just hold your horses. Members on my right are not helping this si...</span></span>
<span><span class="co">#&gt; 3  I move:  That this bill be now read a second time. I'd like to add that Labor is committed to fixing...</span></span>
<span><span class="co">#&gt; 4  Right now, this country is run in the interests of billionaires and big corporations. While single p...</span></span>
<span><span class="co">#&gt; 5  My question is to the Prime Minister. Your government has approved over 30 new coal and gas projects...</span></span>
<span><span class="co">#&gt; 6  What absolute nonsense from the member for Melbourne, the leader of a political party that stopped c...</span></span>
<span><span class="co">#&gt; 7  My question is to the Minister for Climate Change and Energy. How has the Albanese Labor government ...</span></span>
<span><span class="co">#&gt; 8  I thank the member for her question. The number of coal mines or extensions approved is 10. Four hav...</span></span>
<span><span class="co">#&gt; 9  Mr Hamilton interjecting—  The DEPUTY SPEAKER: Member for Groom, do you want to join in the Speaker'...</span></span>
<span><span class="co">#&gt; 10 I move, as an amendment to the amendment moved by the member for Fairfax:  That all words after 'whi...</span></span>
<span></span>
<span><span class="co"># Example of other search terms you might use</span></span>
<span><span class="va">search_terms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"economy"</span>, <span class="st">"health"</span>, <span class="st">"education"</span>, <span class="st">"budget"</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">term</span> <span class="kw">in</span> <span class="va">search_terms</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">count_query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">    SELECT COUNT(*) as count </span></span>
<span><span class="st">    FROM speeches </span></span>
<span><span class="st">    WHERE LOWER(content) LIKE '%"</span>, <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">tolower</a></span><span class="op">(</span><span class="va">term</span><span class="op">)</span>, <span class="st">"%'</span></span>
<span><span class="st">  "</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbGetQuery.html" class="external-link">dbGetQuery</a></span><span class="op">(</span><span class="va">con</span>, <span class="va">count_query</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">count</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Found"</span>, <span class="va">result</span><span class="op">$</span><span class="va">count</span>, <span class="st">"mentions of '"</span>, <span class="va">term</span>, <span class="st">"'\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Found 61 mentions of ' economy '</span></span>
<span><span class="co">#&gt; Found 106 mentions of ' health '</span></span>
<span><span class="co">#&gt; Found 74 mentions of ' education '</span></span>
<span><span class="co">#&gt; Found 102 mentions of ' budget '</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="alternative-database-friendly-search-pattern">Alternative Database-Friendly Search Pattern<a class="anchor" aria-label="anchor" href="#alternative-database-friendly-search-pattern"></a>
</h4>
<p>For better performance with large databases, you can also use this
pattern:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># More efficient search for large databases</span></span>
<span><span class="co"># Search with LIMIT in SQL rather than collecting all results</span></span>
<span><span class="va">climate_search</span> <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbGetQuery.html" class="external-link">dbGetQuery</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"</span></span>
<span><span class="st">  SELECT </span></span>
<span><span class="st">    m.full_name,</span></span>
<span><span class="st">    m.party, </span></span>
<span><span class="st">    s.session_date,</span></span>
<span><span class="st">    sp.content_length</span></span>
<span><span class="st">  FROM speeches sp</span></span>
<span><span class="st">  LEFT JOIN members m ON sp.member_id = m.member_id  </span></span>
<span><span class="st">  LEFT JOIN sessions s ON sp.session_id = s.session_id</span></span>
<span><span class="st">  WHERE sp.content LIKE '%climate%'</span></span>
<span><span class="st">  ORDER BY s.session_date DESC</span></span>
<span><span class="st">  LIMIT 10</span></span>
<span><span class="st">"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">climate_search</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Climate mentions using direct SQL:\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">climate_search</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"No climate mentions found\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Climate mentions using direct SQL:</span></span>
<span><span class="co">#&gt;                   full_name party session_date content_length</span></span>
<span><span class="co">#&gt; 1                      &lt;NA&gt;  &lt;NA&gt;        20172           1625</span></span>
<span><span class="co">#&gt; 2                      &lt;NA&gt;  &lt;NA&gt;        20172           6516</span></span>
<span><span class="co">#&gt; 3                      &lt;NA&gt;  &lt;NA&gt;        20172          12979</span></span>
<span><span class="co">#&gt; 4                      &lt;NA&gt;  &lt;NA&gt;        20172           1482</span></span>
<span><span class="co">#&gt; 5       Bandt, Adam Paul MP    AG        20172            523</span></span>
<span><span class="co">#&gt; 6      Albanese, Anthony MP   ALP        20172           2308</span></span>
<span><span class="co">#&gt; 7           Sitou, Sally MP   ALP        20172            216</span></span>
<span><span class="co">#&gt; 8  Plibersek, Tanya Joan MP   ALP        20172           1722</span></span>
<span><span class="co">#&gt; 9                      &lt;NA&gt;  &lt;NA&gt;        20172           4690</span></span>
<span><span class="co">#&gt; 10          Wilson, Rick MP    LP        20172           6602</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="topic-based-analysis">Topic-Based Analysis<a class="anchor" aria-label="anchor" href="#topic-based-analysis"></a>
</h4>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Questions vs Answers by party</span></span>
<span><span class="va">qa_balance</span> <span class="op">&lt;-</span> <span class="va">tbls</span><span class="op">$</span><span class="va">speeches</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">tbls</span><span class="op">$</span><span class="va">members</span>, by <span class="op">=</span> <span class="st">"member_id"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">party</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    questions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">is_question</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    answers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">is_answer</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    question_answer_ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">is_question</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">is_answer</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fl">2</span></span>
<span>    <span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">questions</span> <span class="op">+</span> <span class="va">answers</span> <span class="op">&gt;=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">question_answer_ratio</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Missing values are always removed in SQL aggregation functions.</span></span>
<span><span class="co">#&gt; Use `na.rm = TRUE` to silence this warning</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">qa_balance</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 0 × 4</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 4 variables: party &lt;chr&gt;, questions &lt;lgl&gt;, answers &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   question_answer_ratio &lt;lgl&gt;</span></span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="step-8-data-export-for-external-analysis">Step 8: Data Export for External Analysis<a class="anchor" aria-label="anchor" href="#step-8-data-export-for-external-analysis"></a>
</h3>
<div class="section level4">
<h4 id="export-to-csv-for-r-analysis">Export to CSV for R Analysis<a class="anchor" aria-label="anchor" href="#export-to-csv-for-r-analysis"></a>
</h4>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Export member statistics</span></span>
<span><span class="va">member_stats</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_top_speakers.html">get_top_speakers</a></span><span class="op">(</span><span class="va">con</span>, limit <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">member_stats</span>, <span class="st">"member_activity_stats.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Export session summary</span></span>
<span><span class="va">session_summary</span> <span class="op">&lt;-</span> <span class="va">tbls</span><span class="op">$</span><span class="va">sessions</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span></span>
<span>    <span class="va">tbls</span><span class="op">$</span><span class="va">speeches</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">session_id</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>        speech_count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        question_count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">is_question</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>        avg_speech_length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">content_length</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>        .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>      <span class="op">)</span>,</span>
<span>    by <span class="op">=</span> <span class="st">"session_id"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">session_summary</span>, <span class="st">"session_summary.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Data exported to CSV files for external analysis\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Data exported to CSV files for external analysis</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="step-9-database-maintenance">Step 9: Database Maintenance<a class="anchor" aria-label="anchor" href="#step-9-database-maintenance"></a>
</h3>
<div class="section level4">
<h4 id="check-import-status">Check Import Status<a class="anchor" aria-label="anchor" href="#check-import-status"></a>
</h4>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check for any failed imports</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/exists.html" class="external-link">exists</a></span><span class="op">(</span><span class="st">"combined_results"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">failed_imports</span> <span class="op">&lt;-</span> <span class="va">combined_results</span><span class="op">[</span><span class="op">!</span><span class="va">combined_results</span><span class="op">$</span><span class="va">success</span>, <span class="op">]</span></span>
<span>  </span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">failed_imports</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Files that failed to import:\n"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">failed_imports</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"filename"</span>, <span class="st">"processed_at"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Retry failed imports</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nRetrying failed imports...\n"</span><span class="op">)</span></span>
<span>    <span class="va">retry_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_hansard_batch.html">import_hansard_batch</a></span><span class="op">(</span></span>
<span>      <span class="va">failed_imports</span><span class="op">$</span><span class="va">file_path</span>, </span>
<span>      <span class="va">con</span>, </span>
<span>      validate <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>      force_reimport <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">retry_results</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"All files imported successfully!\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Files that failed to import:</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 2</span></span></span>
<span><span class="co">#&gt;   filename                  processed_at       </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2024-02-08_edit_step7.csv 2025-08-06 <span style="color: #949494;">00:01:00</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2024-05-14_edit_step7.csv 2025-08-06 <span style="color: #949494;">00:01:00</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2024-11-21_edit_step7.csv 2025-08-06 <span style="color: #949494;">00:01:00</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2025-02-06_edit_step7.csv 2025-08-06 <span style="color: #949494;">00:01:00</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2025-03-25_edit_step7.csv 2025-08-06 <span style="color: #949494;">00:01:00</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Retrying failed imports...</span></span>
<span><span class="co">#&gt; Processing: 2024-02-08_edit_step7.csv</span></span>
<span><span class="co">#&gt;   v Successfully imported 243 records</span></span>
<span><span class="co">#&gt; Processing: 2024-05-14_edit_step7.csv</span></span>
<span><span class="co">#&gt;   v Successfully imported 191 records</span></span>
<span><span class="co">#&gt; Processing: 2024-11-21_edit_step7.csv</span></span>
<span><span class="co">#&gt;   v Successfully imported 166 records</span></span>
<span><span class="co">#&gt; Processing: 2025-02-06_edit_step7.csv</span></span>
<span><span class="co">#&gt;   v Successfully imported 182 records</span></span>
<span><span class="co">#&gt; Processing: 2025-03-25_edit_step7.csv</span></span>
<span><span class="co">#&gt;   v Successfully imported 189 records</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Import Summary ===</span></span>
<span><span class="co">#&gt; Successful: 5/5 (100%)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   file_path                                 filename success processed_at       </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> /home/runner/work/_temp/Library/hansardR… 2024-02… TRUE    2025-08-06 <span style="color: #949494;">00:01:03</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> /home/runner/work/_temp/Library/hansardR… 2024-05… TRUE    2025-08-06 <span style="color: #949494;">00:01:03</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> /home/runner/work/_temp/Library/hansardR… 2024-11… TRUE    2025-08-06 <span style="color: #949494;">00:01:03</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> /home/runner/work/_temp/Library/hansardR… 2025-02… TRUE    2025-08-06 <span style="color: #949494;">00:01:03</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> /home/runner/work/_temp/Library/hansardR… 2025-03… TRUE    2025-08-06 <span style="color: #949494;">00:01:03</span></span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="database-optimization">Database Optimization<a class="anchor" aria-label="anchor" href="#database-optimization"></a>
</h4>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get database file size</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="va">db_path</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">db_size_mb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.info.html" class="external-link">file.size</a></span><span class="op">(</span><span class="va">db_path</span><span class="op">)</span> <span class="op">/</span> <span class="fl">1024</span><span class="op">^</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Database size:"</span>, <span class="va">db_size_mb</span>, <span class="st">"MB\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Database size: 4.2 MB</span></span>
<span></span>
<span><span class="co"># Optimize database (SQLite maintenance)</span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbExecute.html" class="external-link">dbExecute</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"VACUUM;"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbExecute.html" class="external-link">dbExecute</a></span><span class="op">(</span><span class="va">con</span>, <span class="st">"ANALYZE;"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Database optimized\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Database optimized</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="cleanup">Cleanup<a class="anchor" aria-label="anchor" href="#cleanup"></a>
</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Close database connection when finished</span></span>
<span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html" class="external-link">dbDisconnect</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Database connection closed\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Database connection closed</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="next-steps">Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h3>
<p>With your Hansard data now in a structured database, you can:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Conduct longitudinal analysis</strong> of parliamentary
discourse</li>
<li>
<strong>Perform text mining</strong> and sentiment analysis on
speech content</li>
<li>
<strong>Analyse party dynamics</strong> and question-answer
patterns</li>
<li>
<strong>Study member behaviour</strong> across different topics and
time periods</li>
<li>
<strong>Export data</strong> for use with other text analysis
tools</li>
</ol>
</div>
<div class="section level3">
<h3 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h3>
<div class="section level4">
<h4 id="common-issues">Common Issues<a class="anchor" aria-label="anchor" href="#common-issues"></a>
</h4>
<p><strong>File validation failures:</strong> - Check file encoding
(should be UTF-8) - Verify column names match expected schema - Ensure
date format in filename is YYYY-MM-DD</p>
<p><strong>Import errors:</strong> - Use
<code>force_reimport = TRUE</code> to overwrite existing sessions -
Check database permissions and disk space - Validate file structure
before import</p>
<p><strong>Memory issues with large datasets:</strong> - Process years
individually rather than all at once - Use <code>progress = FALSE</code>
to reduce overhead - Close and reconnect database periodically for long
imports</p>
<p><strong>Query performance:</strong> - Database includes optimized
indexes for common queries - Use <code><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect()</a></code> only when you
need data in R - Filter early in dplyr chains to reduce data
transfer</p>
<p>For additional help, see the package documentation:
<code><a href="https://australian-parliamentary-speech.github.io/hansardR/reference">help(package = "hansardR")</a></code></p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Kenneth Benoit.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
